---
layout: post
title: 记录搭建本博客过程中遇到的问题及解决方案
date: 2019-07-20 
tag: Blog
---

  出于暑假闲着没事干的原因，本着不浪费自己申请的五年的域名的初衷，加上不愿意额外花钱去买一个仅仅用来搭建网站的服务器的原因。我踏上了这段自（hao）娱（wu）自（yi）乐（yi）的基于jekyll在github上搭建个人博客的不归路。因为教程来自2016年，三年过去了ruby和jekyll都已经更新了无数个版本，照搬老一套的思路让我遇见了许多bug。因此，写下这篇文章记录一下解决这些bug的过程中自己学到了什么，也算是没有白费这两天的一番折腾吧。

### 关于ruby版本

  没记错的话在网上找到的关于使用jekyll搭建博客的教程多是使用ruby2开头的版本，而现在最稳定流行的版本应该是3.5x的版本，我也就选择了这个这个版本下载。安装好后按部就班进行jekyll的各种安装，前方的路都很平坦。

  直到安装完jekyll，最多说得上失败的过程也不过是博主记录的没有安装过jekyll的电脑需要运行一条命令

```bash
gem install bundler
```

  这里有一个值得注意的地方就是后面的bundle xxx的内容其实是每个仓库都要执行一遍的，上方代码的操作相当于只是安装了bundler这个组件，后面的内容则是利用这个组件来安装一些其他的东西。其中bundle install的部分原博主要求改source文件时因为ruby官网需要科学上网才能抵达（否则速度很慢或者无法下载），改成国内镜像站方便下载而已。

  但是这个时候启动本地预览服务的时候有可能出现打不开的情况，不过大概率遇到的情况是有显示但是内容不齐或者说与原博主不太一样，这是因为ruby版本与博主的不同，所以看起来与他的结果有所区别。但是在你直接clone他的仓库改博客的时候就会发现这个模板是有一点小问题的，你电脑上的新的ruby版本无法兼容他的gemfile，需要手动进行更改，具体怎么改会在后面相关jekyll的部分提及。如果没有用到本地服务只是fork他的文件做更改在网页上看不清楚是否会遇到类似问题。

### 关于git

  毕竟是在github上面建站，如果忽略bug们的话，搭建这个博客唯一需要了解一点的只有git的简单命令了。当然我指的是让这个网站出现，如果你想按自己的想法完成一篇篇博客或者想更改原博主的一些模板还是需要仔细读读jekyll，markdown，html，js这些基础知识的官方文档的。

  同样，git的基础安装配置也是属于需要掌握的基础知识的范畴，虽然我在此处也掉进不少坑，但限于篇幅就不在此做记录了。唯一值得一提要记住的就是安装好后要记得***设置邮箱和用户名*** 这种配置是安装好设置一次就可以长期使用的！

  讲讲核心命令

```bash
git clone https://xxxxxxxxxx
git status
git add .
git commit -m "更改提交的备注"
git push
```

  既然是要按照博主的模板来改，当然首先要做的事情就是上github把原作者的博客源码给clone下来啦，但是clone完之后一定一定要记得更改origin地址！因为git的逻辑是从哪个远程仓库克隆下来就绑定某个仓库，如果不更改origin地址用短命令就是发布更改到原博主的github上啦，虽然他肯定不会同意你的更改，但这么做了肯定是一件十分糗的事情。具体怎么改可以参考git的官方文档。

  第二个到第五个命令，是我们每次更改博客会用到的。

  顾名思义，第二个status命令就是查看当前修改的状态的，会标注哪些文件更改了，哪些文件提交了，哪些文件已经push到了远程库可以不用管了。第三个add命令，"."表示把所有的更改提交进工作区，只有提交了的更改才算是你“已经做了的更改”。第三个commit命令，用于讲工作区的更改提交到库，也就是之前已经add了的更改在此刻会被提交到库，只有做完这一步，本地的库才会记录下你对库所作的更改。最后，push命令就可以将本地的更改提交到远程库只有你是本人或者获得了仓库主人的同意才能完成push这一步，实现对远程库的更改，如果没有更多的问题，运用这几个命令就可以实现对文章的一次修改和发布啦。

---
### **进阶的git学习！**

  虽然在大多数情况下上述三个简单的语句就可以完成一次博客的编写和发布，但是在实际操作过程中仍然有一些时候我们是会遇到意料之外的情况的，这时候我们就需要用一些额外的git命令实现库的更改。

***pull的简单使用***

  首先，最简单实用的一个命令是
```bash
  git pull 
```
  这个命令的作用是在远程库的版本比本地库更新时可以拉取远程库，使其覆盖本地库旧的内容。这个时候我们不由得担心一个问题：我如果在本地库也有了一些远程库没有的更改会怎么样呢？ 是的，没有commit的本地更改会被远程库覆盖掉，因为git会认为远程库的版本新于你的版本，那你的更改是可以被废除的。所以在拉取远程库之前，必须要将你所做的更改add进库中并commit（这样你的提交版本就会和远程版本达到同一个点），这时因为你的版本库和远程库有已经提交的部分产生冲突，git无法判断哪个版本才是你想要的，就会提示你哪些部分是你和远程库不同的部分，提醒你去作出相应的更改。

***分支***

  分支是git中一个十分重要的概念，如果你想对库作出更改，但一次又不能更改玩全部内容的话，最好的做法就是新建一个分支，直到你把所有更新都做完了再与master分支合并。这其中涉及了一些关于拉取分支和请求合并的知识，在搭建博客时几乎用不到，就先不说了。至于还有其他什么内容，等我想起来再补充吧^_^

***未完待续…………***


---

### 关于jekyll

  终于说到了这次博客搭建过程中的主角 ***JEKYLL*** ，jekyll是一个简单的博客形态的静态站点的生成工具。这个工具的作用就是将你写的具有特定格式的文档和配置信息一一翻译成html的样式，并将其发布在网站上。所以，如果想要随心所欲地更改你的博客，仔细读读jekyll官方文档绝对是必不可少的步骤了。这里简单记录一下我用到的几个jekyll命令和jekyll模板中的一些规则。
```bash
  jekyll server 
```
  来吧，我们直奔主题。这个命令就是之前说到的我们会在后面仔细讲解的jekyll命令。这条命令的意思其实很简单，就是启动一个本地的预览服务，只要你启动了该命令，你就可以在本地预览你的网页样式，预览地址为
```bash
  http://172.0.0.1:4000 
```
  其实不启动这个预览也完全不会影响你布局你的博客，你完全可以上传到github上后利用互联网去访问你的博客来达到看效果的目的。但是打开这个服务有一个好处就是你可以在提交之前预览，避免一些尴尬的语句错误出现。此外，这个服务是持续的，你只要在命令行中运行这段代码，你无需再理会它，你在本地作出的更改会被实时转码，让你可以随时看到新的网页效果，免去了不断push的麻烦，直到你满意了你可以一次性对github上的远程库作出更改。

  同时，使用这个服务可能会失败，或者报出一些错误，这个时候你可以通过报错来看出你哪里出现了问题，从而对你的文件作出修改。以至于运气实在太差，出现了转码失败被拒绝访问的话，这里提供几个可能的原因（我踩过的坑）以供参考

***1.gemfile 设置不对***

  gemfile，是你生成的/fork下来的博客样板中的一个文件，这个文件记录了你的模板所需要一些gem文件，比如jekyll的一些包或者你使用的主题模板文件等等，然后这个文件的第一行往往会有一个source，表明这些文件都是从这个网站上面下载下来的，如果无法科学上网可以把这个网址改成对应的国内镜像站。我遇到过的问题就是使用的某个模板无法被找到，于是在jekyll server的时候报错了，但是在网页端却可以正常显示，原因不明。如果是你自己新建的new blog可能会出现一些很长的代码，其中大部分都是一些欢迎使用之类的注释，完全可以不用理会。如果你要使用原博主的一些设定（比较推荐的方式），还是可以直接拷贝博主的gem file，然后把主题的名字添加进去，如：
```bash
  gem 'jekyll-theme-time-machine' 
```
  这样基本上就是博主需要设置的部分了，其中这个文件包可以设置多个主题，只要你在决定网页的那个模板里记录下使用哪个主题自然就会下载对应的主题。但是这个时候仍然是会出现错误的（或者网站的显示有一些bug），具体原因就是下面这个问题↓

  ***2.gemfile.lock的设置***
  
  如果你是个细心的人，一定会发现这个文件夹下面不止有gemfile，还有一个类似于和它捆绑的文件gemfile.lock。这个文件其实相当于对gemfile文件的一个解释，里面记录了所有你gemfile的版本信息。是的，说到这里你可能已经猜到了，无法运行jekyll的原因就是这里记录的版本和你所在的版本不兼容，所以说这个文件你照搬博主的是会出问题的，但是这个问题其实很容易解决，bundle已经帮你想好了方案
```bash
$ bundle update 
```
  一个简单愉快的命令，升级你gemfile里所有的文件到最新版本，如果在后面加上某个gem的名字则可以仅仅升级这个gem到对应的版本。做到这一步基本就是万事大吉了，如果你仅仅想使用博主的博客模板而不做任何改动的话做到这一步已经可以安下心来去_post文件夹慢慢更新你的博客了。当然，我的记录不能仅限于此，随着jekyll文档的继续阅读，我还想更改一下博主的其他设置页面。

***3.根目录下几个文件的作用***

---

***index.html***

  博客首页文件。这个文件下记录了博客首页的布局，可以通过对这个文件更改改变自己想在播客主页显示的东西。

---

***tags.html***

  标签栏文件，这个文件指向的是博客中“标签”按钮进入的页面，作用是把所有文章按标签分类，这里可以更改这个页面的布局

---

***archive.html***

  所有文章页面文件。该文件记录“所有文章”按钮对应的页面位置，可做相应更改

---

***about.html***

  自我介绍页文件。该文件指向“关于我”对应的页面，里面可以更改对自己的介绍，推荐更改。

---

***config.html***

  记录一些你所想要展示的个人信息的界面，也是最需要更改的一个界面。这个顺序是由需要被更改的重要性由低到高排列的，所以这个文件是这些文件中最需要更改的。原博主的注释中已经很清晰地标注了一些重要的信息要如何更改，就不做细说了。讲一下最后几行代码的作用
```bash
Pagination:
plugins: [jekyll-paginate,jekyll-sitemap]
paginate: 5
paginate_path: "page:num/"
```
  这是设置每一面有几页的，其中用到了两个jekyll里面的包，原博主的第二行是gems：，但是我这里更改为plugins：。这是因为在某个版本以后就废除了gems：这个用法，推荐更新为我这个，当然如果你所有组件都用原博主的就不会出现版本兼容性问题，但为了便于日后更改，建议使用当下最流行的写法，当然，若干年后可能会有某个角落也会更改为别的写法，再说吧。

```bash
theme: jekyll-theme-time-machine
```
  这一行是记录了我们使用哪个主题的，我刚刚仔细一看原博主的config文件并没有这一行，发现大多数人可能并不会遇到我刚刚提到的gemfile的问题，十分尴尬。不知道我这是在哪个版本看到的写法了，但是我依旧推荐写上这一行，因为这样可以让你想更换模板时更自如。这一行指明你的网页布局是根据哪一个模板来排布的，但是是一个比较低的优先级，也就是说你如果在布局文件里做出了更改，布局就会优先使用你更改后的样子，只有没有设置的默认部分才会使用模板自带的布局。

---

  关于jekyll的部分暂时就先写到这里，还有一些其他关于jekyll的部分运用到了其他更多的知识，将主要在那些知识对应的部分继续记录。

### 关于markdown

### 关于html

### 关于js

