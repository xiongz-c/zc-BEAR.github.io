---
layout: post
title: 更进一步——初探高级二叉树
date: 2019-11-23
tag: algorithm
---

基础的树结构在上两节已经大概梳理了一遍，但是树的内容还是比较多的，所以在这里又开了一章讲一讲期中考试以来这两周我们学到的一些树相关的知识。同时，DSAA的第二次quiz安排在11月26日，本章同时做一个对树阶段的考点复习。

##### tips：虽然本人用JAVA更熟练，但是考虑到算法题中大多使用C++来实现，并且我也在龟速学习C++，这个标签下的代码都是C++代码。

### 小目录：记录这一章要讲些什么
 
* BST 二叉查找树的构建和操作
* BBST 平衡二叉查找树(解决二叉树失衡退化成链表的问题)[avl-tree]
* 一些证明：BBST的高度为O(logn),
* 

### 二叉查找树：二叉树的基础应用，其他高级二叉树的基本功

二叉查找树(以下简称BST)，顾名思义，就是有查找功能的二叉树，即这个树的结构是有一定规律的——每个节点的左子树中所有节点的值均小于该节点的值，反之，右子树的所有节点的值均大于该节点的值。对于一个二叉查找树，我们需要掌握的基本操作有插入、删除、查找等，这些是后期学到高级树之后我们依旧需要用到的基本功。开始之前，我们先回顾一下二叉树的基本结构：

```cpp
struct TreeNode{
    int val;
    TreeNode *fa;
    TreeNode *lc;
    TreeNode *rc;
};
```

其中，根节点没有父节点，且所有节点的左孩子值一定小于节点值，右孩子一定大于节点值。

####搜索

####添加

添加的思路很清晰，即构建一个值为val的节点，然后通过**搜索**找到一个符合要求的节点——节点值大于目标值，且节点的左孩子的值小于目标值 or 节点值小于目标值，且节点的左孩子的值大于目标值。然后做一个类似于链表操作的链接即可。

```cpp
//代码待补全
```

####删除


###平衡二叉查找树(BBST)

回顾了以上几个二叉查找树的功能以后，我们可以进入平衡二叉查找树的学习了。那么这个平衡的意思是什么呢？为什么需要把二叉树进行一个平衡操作？

通过二叉查找树的代码实现，我们可以看出，二叉查找树有一个十分致命的弊端——插入的条件限制的太少了。对于一棵树而言，满足节点符合插入的情况有很多，这就意味着在最坏的情况下可以一直往左子树插入节点，那二叉树就将退化成一条链表了。为了避免这种情况的出现，我们就需要对二叉查找树做一个“平衡”的操作。平衡是指：在插入节点时如果出现了某个节点(指被插入的根节点)的左子树高度比右子树高度大1以上的情况时，把该节点进行旋转操作，使得旋转后节点处子树高度差不大于1。

####失衡的四种姿势：LL，LR，RR，RL

二叉平衡树中最需要理解的部分就是旋转的部分，我们需要掌握四种需要被旋转的失衡方式以及相应的旋转方式，最好自己手写一下这些片段的代码加深对这几种旋转方式的理解。

* **LL**：增删节点后根节点的左子树高度比右子树高度大2，左孩子的左子树比右子树高度大1
* **LR**：增删节点后根节点的左子树高度比右子树高度大2，左孩子的右子树比左子树高度大1
* **RL**：增删节点后根节点的右子树高度比左子树高度大2，右孩子的左子树比右子树高度大1
* **RR**：增删节点后根节点的右子树高度比左子树高度大2，右孩子的右子树比左子树高度大1

以上就是四种旋转的方式，只看文字可能比较抽象，下面贴两张图片举例子来表示失衡的四种情况。

![avatar](images\posts_images\2019-11-24-AdvanceTree\lostBalance1.jpg)

![avatar](images\posts_images\2019-11-24-AdvanceTree\lostBalance2.jpg)